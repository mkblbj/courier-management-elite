# Story 3.6: 出力数据删除功能

## Story

**As a** 系统管理员  
**I want** 能够删除错误的出力数据记录  
**so that** 我可以移除重复或不正确的数据，保证数据的准确性。

## Status

not started

## Context

在使用系统过程中，可能会由于操作失误或其他原因产生错误的出力数据记录。本故事将实现删除出力数据记录的功能，允许用户移除不需要的数据，以维持数据的准确性和一致性。

考虑到删除操作的不可逆性，需要添加确认机制，防止误操作导致重要数据丢失。同时，删除成功后应及时更新相关数据显示，反映删除操作的结果。

## Estimation

Story Points: 1

## Acceptance Criteria

1. - [ ] 在"最近录入数据"表格的每一行添加"删除"按钮
2. - [ ] 点击"删除"按钮时，弹出删除确认对话框
3. - [ ] 确认对话框显示警告信息，提醒用户删除操作的不可逆性
4. - [ ] 对话框中显示将要删除记录的关键信息，包括日期、店铺名称、快递类型和数量
5. - [ ] 对话框底部有"取消"和"确认删除"按钮
6. - [ ] 点击"确认删除"按钮时显示加载状态
7. - [ ] 删除成功后关闭对话框，并从表格中移除该记录
8. - [ ] 删除成功后显示成功提示消息
9. - [ ] 删除失败时显示错误提示消息
10. - [ ] 删除成功后自动更新"当日数据汇总"区域，反映删除后的数据
11. - [ ] 整体视觉设计与系统的其他对话框保持一致

## Subtasks

1. - [ ] 创建删除确认对话框组件
   1. - [ ] 在 `app/output-data/components/DeleteOutputModal.tsx` 中实现删除确认对话框组件
   2. - [ ] 实现警告信息和记录信息的展示
   3. - [ ] 添加取消和确认删除按钮
2. - [ ] 实现删除功能
   1. - [ ] 创建删除出力数据的 API 接口
   2. - [ ] 实现删除请求处理
   3. - [ ] 处理删除过程中的加载状态
   4. - [ ] 处理删除成功和失败的情况
3. - [ ] 集成到最近录入数据表格
   1. - [ ] 在 `OutputList.tsx` 中添加删除按钮
   2. - [ ] 实现删除按钮点击事件处理
   3. - [ ] 打开删除确认对话框并传递当前记录数据
4. - [ ] 实现删除后的数据刷新
   1. - [ ] 删除成功后从表格中移除对应记录
   2. - [ ] 删除成功后刷新"当日数据汇总"
   3. - [ ] 更新表格的总记录数信息
5. - [ ] 添加操作反馈机制
   1. - [ ] 添加删除中的加载状态指示器
   2. - [ ] 实现成功和错误提示消息
   3. - [ ] 设置提示消息的自动消失逻辑

## Testing Requirements:

- 单元测试覆盖率 >= 85%
- 对删除确认对话框组件进行组件测试，验证渲染和交互逻辑
- 测试删除功能，包括成功和失败情况
- 测试取消删除功能
- 测试删除后的数据更新逻辑
- 测试与 API 的集成
- 进行手动测试，验证删除流程的用户体验

## Notes

- 使用 shadcn/ui 的 AlertDialog 组件实现删除确认对话框
- 确认对话框标题应明确显示"删除出力数据"
- 警告信息应使用醒目的颜色，如红色，提示操作危险性
- 记录信息应清晰展示，帮助用户确认是否删除正确的记录
- 确认删除按钮应使用 shadcn/ui 的 Button 组件，采用危险色
- 删除成功反馈使用 shadcn/ui 的 Toast 组件
- 考虑添加批量删除功能，方便一次删除多条记录
- 参考 v0dev 生成的删除确认对话框设计
- 按照 UI-draft.md 中 2.3 部分的出力数据删除设计实现
