# 用户故事：实现按快递类型统计功能

作为系统用户，我希望能够按快递类型查看出力数据统计，以便了解各种快递类型的使用情况，优化物流资源分配。

## 验收标准

1. 在出力统计页面中，当选择"按快递类型"维度时，系统显示各快递类型的出力统计数据
2. 统计数据以表格形式展示，包含以下列：
   - 快递类型名称
   - 总出力量
   - 占比（百分比）
   - 日均出力量
3. 同时提供数据可视化展示，使用柱状图或饼图显示各快递类型的出力量和占比
4. 支持按日期范围筛选，用户可选择特定时间段的数据进行查看
5. 支持按店铺类别筛选，查看特定类别下的快递类型分布
6. 支持按店铺筛选，查看特定店铺的快递类型分布
7. 图表和表格数据一致，随筛选条件变化而同步更新
8. 提供快递类型排名视图，突出显示使用最多的快递类型

## 技术需求

1. 创建按快递类型统计的表格组件，使用 shadcn/ui 的 Table 组件
2. 创建数据可视化图表，使用 Recharts 库实现柱状图和饼图
3. 实现数据加载逻辑，根据筛选条件调用相应的 API 接口
4. 实现数据计算逻辑，包括占比和日均量的计算
5. 添加表格排序功能，支持按不同列进行排序
6. 实现数据筛选功能，支持多维度条件筛选
7. 当没有数据时显示友好的空状态提示

## 实现建议

1. 柱状图应显示各快递类型的出力总量，使用不同颜色区分
2. 饼图应显示各快递类型的出力占比，悬停时显示具体数值和百分比
3. 表格应支持排序功能，默认按出力总量降序排列
4. 图表应有明确的坐标轴标签、图例和数据标签
5. 当应用店铺筛选条件时，可以同时展示该店铺与全局的数据对比
6. 为图表添加导出功能，支持导出为图片格式

## UI 参考

```
+----------------------------------------+
|  统计维度: ... [按快递类型] ...          |
|                                        |
|  日期范围: [2023-05-01] 至 [2023-05-31] |
|  店铺类别: [所有类别 ▼]                 |
|  店铺: [所有店铺 ▼]                    |
|                                        |
|  [生成统计]                             |
+----------------------------------------+
|                                        |
|  [快递类型出力分布柱状图] [快递类型占比饼图] |
|                                        |
+----------------------------------------+
|  快递类型出力数据                        |
|  +---------------------------------+   |
|  | 快递类型 | 总量 | 占比 | 日均量 |      |
|  +---------------------------------+   |
|  | 顺丰速运 | 520  | 45%  | 17    |     |
|  | 韵达快递 | 320  | 28%  | 10    |     |
|  | 圆通速递 | 310  | 27%  | 10    |     |
|  +---------------------------------+   |
|                                        |
+----------------------------------------+
```

## API 接口

需要与以下 API 接口集成：

```typescript
// 按快递类型统计
GET /api/stats/shop-outputs/couriers
请求参数：
{
  date_from?: string,
  date_to?: string,
  category_id?: number,
  shop_id?: number
}
响应:
{
  success: boolean,
  data: [
    {
      courier_id: number,
      courier_name: string,
      total_quantity: number,
      percentage: number,
      daily_average: number
    },
    // ...
  ]
}
```
