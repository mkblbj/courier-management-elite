# 用户故事：实现按日期统计功能

作为系统用户，我希望能够按日期查看出力数据统计，以便了解出力数据的时间分布和趋势，分析业务波动规律。

## 验收标准

1. 在出力统计页面中，当选择"按日期"维度时，系统显示各日期的出力统计数据
2. 统计数据以表格形式展示，包含以下列：
   - 日期
   - 当日总出力量
   - 各店铺类别的出力分布
   - 同比上期变化（可选）
3. 同时提供数据可视化展示，使用折线图或柱状图显示各日期的出力量变化趋势
4. 支持按日期范围筛选，用户可选择特定时间段的数据进行查看
5. 支持按店铺类别筛选，查看特定类别的日期分布
6. 支持按店铺筛选，查看特定店铺的日期分布
7. 支持按快递类型筛选，查看特定快递类型的日期分布
8. 图表和表格数据一致，随筛选条件变化而同步更新
9. 在折线图中标记特殊日期（如节假日），帮助用户理解数据波动原因

## 技术需求

1. 创建按日期统计的表格组件，使用 shadcn/ui 的 Table 组件
2. 创建数据可视化图表，使用 Recharts 库实现折线图和柱状图
3. 实现数据加载逻辑，根据筛选条件调用相应的 API 接口
4. 实现日期格式化，以友好的方式显示日期
5. 添加表格排序功能，支持按日期或出力量进行排序
6. 实现折线图上的特殊日期标记功能
7. 支持数据下载，允许用户导出统计数据为 CSV 或 Excel 格式

## 实现建议

1. 折线图应显示各日期的出力总量变化趋势，可以使用不同颜色区分不同类别或店铺
2. 折线图应支持多条线，可以显示总量和各类别/店铺的对比
3. 表格应支持排序功能，默认按日期升序排列
4. 图表应有明确的坐标轴标签、图例和数据标签
5. 当日期范围较长时，考虑使用日期聚合显示（如按周、按月汇总）
6. 添加数据对比功能，支持同比/环比分析

## UI 参考

```
+----------------------------------------+
|  统计维度: ... [按日期] ...              |
|                                        |
|  日期范围: [2023-05-01] 至 [2023-05-31] |
|  店铺类别: [所有类别 ▼]                 |
|  店铺: [所有店铺 ▼]                    |
|  快递类型: [所有类型 ▼]                 |
|                                        |
|  [生成统计]                             |
+----------------------------------------+
|                                        |
|  [日期出力趋势折线图]                    |
|                                        |
+----------------------------------------+
|  日期出力数据                           |
|  +-----------------------------+       |
|  | 日期 | 总量 | 淘宝 | 京东 | 拼多多 |    |
|  +-----------------------------+       |
|  | 5/1  | 35   | 15   | 10   | 10    |    |
|  | 5/2  | 42   | 20   | 12   | 10    |    |
|  | 5/3  | 38   | 18   | 10   | 10    |    |
|  +-----------------------------+       |
|                                        |
|  [下载数据]                             |
+----------------------------------------+
```

## API 接口

需要与以下 API 接口集成：

```typescript
// 按日期统计
GET /api/stats/shop-outputs/dates
请求参数：
{
  date_from?: string,
  date_to?: string,
  category_id?: number,
  shop_id?: number,
  courier_id?: number
}
响应:
{
  success: boolean,
  data: [
    {
      date: string, // 格式: YYYY-MM-DD
      total_quantity: number,
      categories: [
        {
          category_id: number,
          category_name: string,
          quantity: number
        },
        // ...
      ],
      shops: [
        {
          shop_id: number,
          shop_name: string,
          quantity: number
        },
        // ...
      ]
    },
    // ...
  ]
}
```
