# 用户故事：实现按店铺类别统计功能

作为系统用户，我希望能够按店铺类别查看出力数据统计，以便了解不同类别店铺的出力情况，为经营决策提供依据。

## 验收标准

1. 在出力统计页面中，当选择"按店铺类别"维度时，系统显示各店铺类别的出力统计数据
2. 统计数据以表格形式展示，包含以下列：
   - 类别名称
   - 总出力量
   - 占比（百分比）
   - 日均出力量
3. 同时提供数据可视化展示，使用柱状图或饼图显示各类别的出力量和占比
4. 支持按日期范围筛选，用户可选择特定时间段的数据进行查看
5. 支持按快递类型筛选，查看指定快递类型的类别分布
6. 图表和表格数据一致，随筛选条件变化而同步更新
7. 数据加载过程中显示加载状态，提升用户体验

## 技术需求

1. 创建按店铺类别统计的表格组件，使用 shadcn/ui 的 Table 组件
2. 创建数据可视化图表，使用 Recharts 库实现柱状图和饼图
3. 实现数据加载逻辑，根据筛选条件调用相应的 API 接口
4. 实现数据计算逻辑，包括占比和日均量的计算
5. 添加表格排序功能，支持按不同列进行排序
6. 实现筛选条件与图表/表格的数据联动

## 实现建议

1. 柱状图应显示各类别的出力总量，使用不同颜色区分
2. 饼图应显示各类别的出力占比，悬停时显示具体数值和百分比
3. 表格应支持排序功能，默认按出力总量降序排列
4. 图表应有明确的坐标轴标签、图例和数据标签
5. 柱状图和饼图可以并排显示，或提供切换按钮
6. 为表格添加分页功能，当类别数量较多时保持页面整洁

## UI 参考

```
+----------------------------------------+
|  统计维度: [按店铺类别] ...               |
|                                        |
|  日期范围: [2023-05-01] 至 [2023-05-31] |
|  快递类型: [所有类型 ▼]                  |
|                                        |
|  [生成统计]                             |
+----------------------------------------+
|                                        |
|  [类别出力分布柱状图]    [类别占比饼图]   |
|                                        |
+----------------------------------------+
|  类别出力数据                            |
|  +-------------------------------+     |
|  | 类别名称 | 总量 | 占比 | 日均量 |     |
|  +-------------------------------+     |
|  | 淘宝     | 520  | 45%  | 17   |     |
|  | 京东     | 320  | 28%  | 10   |     |
|  | 拼多多   | 310  | 27%  | 10   |     |
|  +-------------------------------+     |
|                                        |
+----------------------------------------+
```

## API 接口

需要与以下 API 接口集成：

```typescript
// 按店铺类别统计
GET /api/stats/shop-outputs/categories
请求参数：
{
  date_from?: string,
  date_to?: string,
  courier_id?: number
}
响应:
{
  success: boolean,
  data: [
    {
      category_id: number,
      category_name: string,
      total_quantity: number,
      percentage: number,
      daily_average: number
    },
    // ...
  ]
}
```
