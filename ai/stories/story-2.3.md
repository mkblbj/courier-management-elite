# Story 2.3: 快递类型统计功能更新

## Story

**As a** 系统管理员和业务分析人员
**I want** 查看按层级结构组织的快递类型统计数据
**so that** 我可以更全面地了解各类型快递的使用情况，包括母类型及其子类型的详细分布。

## Status

Draft

## Context

随着母子快递类型功能的实现，统计功能也需要相应更新，以支持层级数据的可视化展示。用户需要能够查看母类型的总计数据（包含子类型之和），同时也能够查看子类型的详细数据，以便进行更精细的数据分析和决策。

## Estimation

Story Points: 2

## Acceptance Criteria

1. - [ ] 更新对应统计组件，按层级结构显示统计数据
2. - [ ] 母类型统计包含其自身数据和子类型之和
3. - [ ] 提供切换按钮，可选择查看"平铺视图"或"层级视图"
4. - [ ] 实现下钻分析功能，点击母类型可展开查看其子类型详细数据
5. - [ ] 支持层级折叠/展开以简化视图
6. - [ ] 更新统计图表，饼图支持显示母子类型数据的层级关系
7. - [ ] 添加提示信息，说明母类型数据包含子类型之和

## Subtasks

1. - [ ] 更新统计数据获取逻辑

   1. - [ ] 添加获取层级统计数据的功能
   2. - [ ] 实现母类型统计计算（自身+子类型之和）
   3. - [ ] 优化数据格式，便于层级显示

2. - [ ] 更新对应统计组件 UI

   1. - [ ] 实现层级显示的数据列表
   2. - [ ] 添加视图切换功能（平铺/层级）
   3. - [ ] 实现母类型点击展开/折叠子类型的交互
   4. - [ ] 添加视觉提示，区分母类型和子类型

3. - [ ] 更新统计图表

   1. - [ ] 修改饼图组件，支持显示层级数据
   2. - [ ] 添加图例说明，清晰展示母子类型关系
   3. - [ ] 实现图表与列表的联动交互

4. - [ ] 添加辅助信息和控件

   1. - [ ] 添加信息提示，说明数据计算方式
   2. - [ ] 添加帮助按钮，显示功能说明
   3. - [ ] 实现全部展开/折叠的快捷控件

5. - [ ] 测试和优化
   1. - [ ] 编写单元测试，验证计算逻辑
   2. - [ ] 进行性能测试，确保大数据量下的响应速度
   3. - [ ] 测试各种数据场景下的显示效果

## Testing Requirements

- 单元测试覆盖率不低于 85%
- 确保 UI 组件在不同数据量下的性能稳定
- 测试各种数据场景，包括无子类型、多层子类型等
- 验证统计数据的准确性，特别是汇总计算

## Story Wrap Up (To be filled in AFTER agent execution):

- **Agent Model Used:** `<Agent Model Name/Version>`
- **Agent Credit or Cost:** `<Cost/Credits Consumed>`
- **Date/Time Completed:** `<Timestamp>`
- **Commit Hash:** `<Git Commit Hash of resulting code>`
- **Change Log**
  - change X
  - change Y
    ...
