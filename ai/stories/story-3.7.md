# Story 3.7: 当日数据汇总展示

## Story

**As a** 系统管理员  
**I want** 能够查看当日所有店铺的出力数据汇总  
**so that** 我可以快速了解各店铺的出货情况，掌握整体业务情况。

## Status

not started

## Context

在日常管理中，用户需要快速掌握当天的整体出力情况。本故事将实现当日出力数据的汇总展示功能，以卡片形式显示各店铺的出力数据统计，帮助用户直观地了解业务情况。

数据汇总将按店铺和快递类型进行分组统计，显示各类别的总量，并提供简单的数据可视化，如柱状图或饼图，使数据更加直观。

## Estimation

Story Points: 3

## Acceptance Criteria

1. - [ ] 在出力数据页面下部实现"当日数据汇总"区域
2. - [ ] 汇总数据卡片按店铺分组展示
3. - [ ] 每个店铺卡片显示店铺名称和总出力量
4. - [ ] 在店铺卡片内，按快递类型分类显示各类型的出力量
5. - [ ] 在区域顶部显示选择的日期（来自故事 3.2 中的日期选择器）
6. - [ ] 实现数据可视化，使用柱状图或饼图展示各店铺的出力比例
7. - [ ] 当没有数据时，显示"暂无数据"提示
8. - [ ] 数据加载过程中显示加载状态
9. - [ ] 添加刷新按钮，点击后重新加载最新数据
10. - [ ] 实现按类别筛选功能，可以选择显示特定类别的店铺
11. - [ ] 汇总区域的视觉设计应与系统的整体风格保持一致
12. - [ ] 在移动设备上能够良好展示

## Subtasks

1. - [ ] 创建当日数据汇总组件
   1. - [ ] 在 `app/output-data/components/OutputSummary.tsx` 中实现数据汇总组件
   2. - [ ] 实现店铺卡片组件
   3. - [ ] 实现数据可视化组件，集成图表库
2. - [ ] 实现数据获取和统计
   1. - [ ] 创建获取当日汇总数据的 API 接口
   2. - [ ] 实现数据加载和错误处理
   3. - [ ] 实现数据按店铺和快递类型的分组统计
3. - [ ] 实现数据可视化
   1. - [ ] 集成 recharts 或 chart.js 等图表库
   2. - [ ] 实现柱状图或饼图展示
   3. - [ ] 添加图表交互功能，如悬停显示详情
4. - [ ] 实现筛选功能
   1. - [ ] 添加类别筛选选择器
   2. - [ ] 实现数据筛选逻辑
   3. - [ ] 确保筛选后图表数据同步更新
5. - [ ] 集成到出力数据页面
   1. - [ ] 将汇总组件集成到页面布局
   2. - [ ] 实现与日期选择器的联动
   3. - [ ] 在数据录入、编辑、删除后自动更新汇总
6. - [ ] 实现响应式布局
   1. - [ ] 优化汇总卡片在不同屏幕尺寸下的显示
   2. - [ ] 确保图表在小屏幕上仍能清晰显示
   3. - [ ] 测试不同设备下的展示效果
7. - [ ] 样式优化
   1. - [ ] 设计店铺卡片样式，确保视觉吸引力
   2. - [ ] 优化图表颜色和样式，与系统风格一致
   3. - [ ] 添加适当的动画和过渡效果

## Testing Requirements:

- 单元测试覆盖率 >= 85%
- 对汇总组件进行组件测试，验证渲染和数据展示
- 测试数据统计逻辑的准确性
- 测试筛选功能
- 测试图表的渲染和交互
- 测试与 API 的集成
- 测试组件在不同数据状态下的显示（空数据、加载中、错误等）
- 进行手动测试，验证在不同屏幕尺寸下的用户体验

## Notes

- 使用 shadcn/ui 的 Card 组件实现店铺数据卡片
- 使用 recharts 或 chart.js 实现数据可视化图表
- 图表颜色应采用系统配色方案，保持视觉一致性
- 店铺卡片可以使用不同颜色或图标区分不同类别
- 考虑添加数据导出功能，支持导出当日汇总数据
- 图表应支持交互，如悬停显示详细数据
- 参考 v0dev 生成的当日数据汇总设计
- 按照 UI-draft.md 中 2.1 部分的出力数据页面布局设计中的相关部分实现
- 考虑添加简单的数据分析功能，如环比增长等
