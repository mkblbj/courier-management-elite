# Story 3.2: 日期与店铺选择组件

## Story

**As a** 系统管理员  
**I want** 能够方便地选择日期、店铺和快递类型  
**so that** 我可以快速准确地录入特定日期特定店铺的出力数据。

## Status

not started

## Context

出力数据的录入需要指定日期、店铺和快递类型等基本信息。本故事将实现日期选择器和店铺选择组件，方便用户选择这些基本信息，为后续的数据录入奠定基础。

日期选择器需要支持选择当前日期或未来日期，并提供"今天"和"明天"的快捷选项。店铺选择组件需要支持按类别筛选店铺，并与快递类型选择器结合使用，确保用户能够准确选择数据录入的对象。

## Estimation

Story Points: 3

## Acceptance Criteria

1. - [ ] 在出力数据页面顶部实现日期选择区域，包含：
   - 日期选择器（DatePicker 组件）
   - "今天"和"明天"快捷按钮
2. - [ ] 日期选择器允许选择当前日期或未来日期，但不允许选择过去的日期
3. - [ ] 点击"今天"按钮自动设置日期为当天
4. - [ ] 点击"明天"按钮自动设置日期为次日
5. - [ ] 实现店铺类别下拉选择框，显示所有启用状态的店铺类别
6. - [ ] 实现店铺下拉选择框，显示所有启用状态的店铺
7. - [ ] 店铺选择框支持按所选类别筛选，当选择某个类别时，店铺选择框只显示该类别下的店铺
8. - [ ] 实现快递类型下拉选择框，显示所有启用状态的快递类型
9. - [ ] 所有选择框都应支持搜索功能，方便快速查找
10. - [ ] 所有选择器在移动设备上能够良好展示和使用
11. - [ ] 选择器的状态变化应该触发相应的回调，便于表单逻辑处理

## Subtasks

1. - [ ] 实现日期选择器组件
   1. - [ ] 在 `components/shop-output/DateSelector.tsx` 中实现日期选择器组件
   2. - [ ] 添加日期验证逻辑，限制只能选择当前或未来日期
   3. - [ ] 实现"今天"和"明天"快捷按钮
   4. - [ ] 添加日期格式化和解析逻辑
2. - [ ] 实现店铺选择组件
   1. - [ ] 在 `components/shop-output/ShopSelector.tsx` 中实现店铺选择组件
   2. - [ ] 创建类别下拉选择框
   3. - [ ] 创建店铺下拉选择框
   4. - [ ] 实现按类别筛选店铺的逻辑
   5. - [ ] 添加搜索功能
3. - [ ] 实现快递类型选择组件
   1. - [ ] 创建快递类型下拉选择框
   2. - [ ] 集成现有的快递类型数据
   3. - [ ] 添加搜索功能
4. - [ ] 集成数据获取功能
   1. - [ ] 实现获取店铺类别列表的 API 调用
   2. - [ ] 实现获取店铺列表的 API 调用
   3. - [ ] 实现获取快递类型列表的 API 调用
   4. - [ ] 处理加载状态和错误情况
5. - [ ] 将组件集成到出力数据页面
   1. - [ ] 在 `app/output-data/page.tsx` 中集成日期选择器组件
   2. - [ ] 集成店铺选择组件
   3. - [ ] 集成快递类型选择组件
   4. - [ ] 实现组件之间的联动逻辑
6. - [ ] 优化移动端体验
   1. - [ ] 调整移动端下的组件尺寸和布局
   2. - [ ] 确保触摸友好的交互体验
   3. - [ ] 测试不同屏幕尺寸下的显示效果

## Testing Requirements:

- 单元测试覆盖率 >= 85%
- 对各选择器组件进行组件测试，验证渲染和交互逻辑
- 测试日期选择器的日期限制功能
- 测试店铺选择器的类别筛选功能
- 测试 API 集成是否正确
- 测试各组件在不同数据状态下的显示（空数据、加载中、错误等）
- 进行手动测试，验证在不同屏幕尺寸下的用户体验

## Notes

- 使用 shadcn/ui 的 DatePicker 组件实现日期选择器
- 使用 shadcn/ui 的 Select 和 ComboBox 组件实现各选择框
- 日期选择器应显示清晰的格式，推荐使用 YYYY-MM-DD 格式
- 快捷按钮应有明显的视觉区分，使用 shadcn/ui 的 Button 组件实现
- 所有选择框都应有清晰的标签和占位文本
- 考虑添加默认选择逻辑，比如默认选择今天的日期
- 参考 v0dev 生成的日期与店铺选择组件设计
- 按照 UI-draft.md 中 2.1 部分的出力数据页面布局设计中的相关部分实现
