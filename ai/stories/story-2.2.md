# Story 2.2: 快递类型管理界面更新

## Story

**As a** 系统用户
**I want** 在快递类型管理界面中查看和管理母子类型层级关系
**so that** 我可以更直观地管理快递类型的层级结构和相关操作。

## Status

Completed

## Context

随着后端实现了母子快递类型关系功能，需要在前端界面上展示这种层级关系，并提供添加、编辑和管理子类型的功能。用户需要能够清晰地看到哪些是母类型，哪些是子类型，以及它们之间的关系。同时，需要提供创建子类型的功能入口和表单界面。

## Estimation

Story Points: 3

## Acceptance Criteria

1. - [x] 更新快递类型列表组件，使用缩进或树形结构显示母子类型层级关系
2. - [x] 在母类型旁显示子类型数量和总和
3. - [x] 为母类型添加"添加子类型"操作按钮
4. - [x] 实现新的子类型添加对话框组件，支持选择母类型
5. - [x] 确保表单中添加 parent_id 字段，可从 URL 或状态获取
6. - [x] 表单验证确保子类型名称唯一
7. - [x] 更新快递类型编辑界面，显示当前编辑类型的母子关系信息
8. - [x] 如果是子类型，显示其母类型信息
9. - [x] 如果是母类型，显示其所有子类型列表

## Subtasks

1. - [x] 更新快递类型列表组件

   1. - [x] 创建或更新 CourierTypeList 组件，支持层级显示
   2. - [x] 添加显示子类型数量和总和的功能
   3. - [x] 增加"添加子类型"按钮和相应的点击事件处理

2. - [x] 实现子类型添加对话框组件

   1. - [x] 创建 AddSubTypeDialog 组件
   2. - [x] 实现母类型选择器（如下拉菜单）
   3. - [x] 添加 parent_id 字段，支持从 URL 或状态获取
   4. - [x] 实现表单验证，确保子类型名称唯一

3. - [x] 更新快递类型编辑界面

   1. - [x] 在编辑界面中显示母子关系信息
   2. - [x] 为子类型添加母类型信息显示
   3. - [x] 为母类型添加子类型列表显示
   4. - [x] 添加相应的样式和布局调整

4. - [x] 添加子类型操作功能

   1. - [x] 实现从列表添加子类型的功能
   2. - [x] 实现从编辑页面添加子类型的功能
   3. - [x] 实现删除子类型的确认和处理逻辑
   4. - [x] 确保删除子类型不影响母类型

5. - [x] 编写单元测试和集成测试
   1. - [x] 为 CourierTypeList 组件添加测试
   2. - [x] 为 AddSubTypeDialog 组件添加测试
   3. - [x] 为编辑界面的更新添加测试
   4. - [x] 测试子类型操作功能

## Testing Requirements

- 单元测试覆盖率不低于 85%
- 组件测试应覆盖关键用户交互场景
- 确保界面在不同屏幕尺寸下响应式显示正常
- 测试表单验证逻辑和错误提示

## Story Wrap Up (To be filled in AFTER agent execution):

- **Agent Model Used:** `Claude 3.7 Sonnet`
- **Agent Credit or Cost:** `N/A`
- **Date/Time Completed:** `2024-05-29`
- **Commit Hash:** `<Git Commit Hash of resulting code>`
- **Change Log**
  - 实现了快递类型层级显示功能
  - 添加了子类型数量和总和显示
  - 实现了添加子类型的对话框和功能
  - 更新了快递类型编辑界面，支持母子关系信息展示
  - 完成了所有单元测试，测试覆盖率达标
